(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const n of o.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&a(n)}).observe(document,{childList:!0,subtree:!0});function d(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(r){if(r.ep)return;r.ep=!0;const o=d(r);fetch(r.href,o)}})();(()=>{let s=[];const i=["C","D","H","S"],d=["A","J","Q","K"];let a=[],r=[];const o=document.querySelector(".btnPedir"),n=document.querySelector(".btnDetener"),C=document.querySelector(".btnNuevo"),g=document.querySelectorAll(".divCartas"),h=document.querySelectorAll("small"),p=(t=2)=>{s=J(),a=[],r=[];for(let e=0;e<t;e++)a.push(0),r.push([]);console.clear(),h.forEach(e=>e.innerText=0),g.forEach(e=>e.innerHTML=""),o.disabled=!1,n.disabled=!1},J=()=>{s=[];for(let t=2;t<=10;t++)for(let e of i)s.push(t+e);for(let t of i)for(let e of d)s.push(e+t);return s},m=()=>{if(s.length===0)throw"No hay cartas en la Baraja";let t=Math.floor(Math.random()*s.length);const e=s[t];return s=s.filter(l=>l!==e),e},v=t=>{const e=t.substring(0,t.length-1);return isNaN(e)?e==="A"?11:10:e*1},b=(t,e)=>{let l=v(t);return l===11&&l+a[e]>21&&r[e]===2?a[e]=a[e]+l-20:l===11&&l+a[e]>21?a[e]=a[e]+l-10:a[e]=a[e]+l,h[e].innerText=a[e],a[e]},y=(t,e)=>{const l=document.createElement("img");l.src=`assets/cartas/${t}.png`,l.classList.add("card"),g[e].append(l)},u=t=>{do{const e=m();r[r.length-1].splice(r.length-1,0,e),b(e,a.length-1),y(e,a.length-1);let l=r[0],c=r[r.length-1],f=a[a.length-1];if(t>21)break;if(t===21&&l===2){if(f<10&&c.length<2)break;if(f<21&&c.length<=2)break}else if(f>=17)break}while(a[a.length-1]<=t&&t<=21);L(t)},L=t=>{setTimeout(()=>{let e=r[0],l=r[r.length-1],c=a[a.length-1];c===t&&e.length===l.length||c===t&&e.length>2?alert("Empate, Nadie Gana ni Pierde"):e.length===2&&t===21?alert("BlackJack! Jugador Gana"):t>21?alert("Computadora Gana"):c>21?alert("Jugador Gana"):c>t?l.length===2&&c===21?alert("BlackJack! Computadora Gana"):alert("Computadora Gana"):alert(c===t?"Empate, Nadie Gana ni Pierde":"Jugador Gana")},100)};return o.addEventListener("click",()=>{const t=m();r[0].splice(0,0,t);const e=b(t,0);y(t,0),(e>21||e===21)&&(o.disabled=!0,n.disabled=!0,u(e))}),n.addEventListener("click",()=>{o.disabled=!0,n.disabled=!0,u(a[0])}),C.addEventListener("click",()=>{p()}),{nuevoJuego:p}})();
